{% extends "dl-specification-base.html" %}

{% block dlStyle %}
<style>
    code {
        padding: 0 5px;
        color: #d4351c;
        background-color: #f3f2f1;
    }

    code.value {
        color: #00703c;
    }
</style>
{% endblock dlStyle %}

{% set page_caption = "Specification" %}
{% set page_title = specification.name + " changelog" %}

{% block dl_content %}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        {% for log in changelog %}
        <h2 class="govuk-heading-l"><a href="{{sectionPath}}/{{specification.specification}}/{{log.current}}"
          class="govuk-link">{{log.current}}</a></h2>
            <p class="govuk-body">Previous version was <a
                    href="{{sectionPath}}/{{specification.specification}}/{{log.previous}}"
                    class="govuk-link">{{log.previous}}</a></p>

            <!-- Colm this would show any new or removed datasets
            {% if log.dataset_change and (log.dataset_change.added or log.dataset_change.removed) %}
                <p>Dataset changes</p>
                <p>added: {{log.dataset_change.added}}</p>
                <p>removed: {{log.dataset_change.removed}}</p>
            {% endif %}
            -->
            <h3 class="govuk-heading-m">What fields have changed?</h3>
            {% for c in log.changes %}
            <p class="govuk-body">Field changes to the <strong class="govuk-!-font-weight-bold">{{c.dataset.name}}</strong> dataset</p>
            <p class="govuk-body">Added:</p>
            <ul class="govuk-list govuk-list--bullet">
              {%- for field in c.added %}
              <li>{{ field }}</li>
              {% endfor -%}
            </ul>
            <p class="govuk-body">Removed:</p>
            <ul class="govuk-list govuk-list--bullet">
              {%- for field in c.removed %}
              <li>{{ field }}</li>
              {% endfor -%}
            </ul>
            {% endfor %}
        <hr class="govuk-section-break govuk-section-break--visible">
        {% endfor %}
    </div>
</div>
{% endblock %}
